<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Lignes de Bon de Commande Achat -->
    <!-- Vues Formulaire -->
    <record id="sh_pol_purchase_order_line_form_view_inherit" model="ir.ui.view">
        <field name="name">Formulaire Ligne d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="order_id" string="Commande" />
                            <field name="product_id" />
                            <field name="product_uom" />
                            <field name="product_uom_qty" string="Qté commandée" />
                            <field name="taxes_id" widget="many2many_tags" />
                            <field name="currency_id" invisible="1" />
                            <field name="price_subtotal" widget="monetary" />
                        </group>
                        <group>
                            <field name="partner_id" />
                            <field name="name" />
                            <field name="price_unit" />
                            <field name="date_planned" />
                            <field name="product_uom_category_id" />
                            <field name="company_id" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Vue Liste -->
    <record id="sh_purchase_order_line_tree_view_inherit" model="ir.ui.view">
        <field name="name">Liste Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <tree>
                <field name="order_id" string="Commande" />
                <field name="partner_id" />
                <field name="product_id" />
                <field name="name" />
                <field name="product_uom" />
                <field name="product_uom_qty" string="Qté commandée" />
                <field name="price_unit" />
                <field name="taxes_id" widget="many2many_tags" />
                <field name="currency_id" invisible="1" />
                <field name="price_subtotal" widget="monetary" />
                <field name="date_planned" />
            </tree>
        </field>
    </record>

    <!-- Vue Kanban -->
    <record id="sh_purchase_order_line_kanban_view_inherit" model="ir.ui.view">
        <field name="name">Kanban Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <kanban default_group_by="partner_id">
                <field name="product_id" />
                <field name="product_uom_qty" string="Qté" />
                <field name="order_id" string="Commande" />
                <field name="partner_id" />
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_details">
                                <strong>Commande : <field name="order_id" /> </strong>
                                <br />
                                Fournisseur : <field name="partner_id" string="product_id :" />
                                <br />
                                Article : <field name="product_id" />
                                <br />
                                Qté : <field name="product_uom_qty" />
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Vue Recherche -->
    <record id="sh_purchase_order_line_search_view_inherit" model="ir.ui.view">
        <field name="name">Recherche Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <search string="Lignes de Commande d'Achat">
                <field name="partner_id" filter_domain="['|','|',('partner_id','ilike',self),('order_id','ilike',self),('product_id','ilike',self)]" />
                <field name="order_id" string="Commande" />
                <field name="product_id" />
                <field name="date_planned" />
                <separator />

                <filter string="Date de commande" name="filter_order_date" date="date_planned" />

                <group expand="0" string="Regrouper par">
                    <filter name="group_by_partner_id" domain="[]" string="Fournisseur" context="{'group_by':'partner_id'}" />
                    <filter name="group_by_order_id" domain="[]" string="Commande" context="{'group_by':'order_id'}" />
                    <filter name="group_by_product_id" domain="[]" string="Article" context="{'group_by':'product_id'}" />
                </group>
            </search>
        </field>
    </record>

    <!-- Vue Pivot -->
    <record model="ir.ui.view" id="view_purchase_order_line_pivot">
        <field name="name">Pivot Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <pivot string="Lignes de Commande d'Achat">
                <field name="order_id" type="row" />
                <field name="product_id" type="row" />
                <field name="price_subtotal" type="measure" />
            </pivot>
        </field>
    </record>

    <!-- Vue Graphique -->
    <record model="ir.ui.view" id="view_purchase_order_line_graph">
        <field name="name">Graphique Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <graph string="Lignes de Commande d'Achat">
                <field name="product_id" />
                <field name="partner_id" type="measure" />
            </graph>
        </field>
    </record>

    <record id="view_purchase_order_line_calendar" model="ir.ui.view">
        <field name="name">Calendrier Lignes d'Achat</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <calendar string="Lignes de Commande d'Achat" date_start="create_date">
                <field name="partner_id" />
                <field name="price_subtotal" widget="monetary" />
            </calendar>
        </field>
    </record>

    <!-- Action -->
    <record id="sh_action_purchase_order_lines" model="ir.actions.act_window">
        <field name="name">Lignes de Commande d'Achat</field>
        <field name="res_model">purchase.order.line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">tree,form,kanban,pivot,graph,calendar</field>
        <field name="domain">[('state','=','purchase')]</field>
        <field name="view_id" ref="sh_purchase_order_line_tree_view_inherit" />
    </record>

    <!-- Lignes de Demande de Prix -->

    <!-- Vues Formulaire -->
    <record id="sh_pol_rfq_order_line_form_view_inherit" model="ir.ui.view">
        <field name="name">Formulaire Ligne de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="order_id" string="Commande" />
                            <field name="product_id" />
                            <field name="product_uom" />
                            <field name="product_uom_qty" string="Qté commandée" />
                            <field name="taxes_id" widget="many2many_tags" />
                            <field name="currency_id" invisible="1" />
                            <field name="price_subtotal" widget="monetary" />
                        </group>
                        <group>
                            <field name="partner_id" />
                            <field name="name" />
                            <field name="price_unit" />
                            <field name="date_planned" />
                            <field name="product_uom_category_id" />
                            <field name="company_id" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Vue Liste -->
    <record id="sh_rfq_order_line_tree_view_inherit" model="ir.ui.view">
        <field name="name">Liste Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <tree>
                <field name="order_id" string="Commande" />
                <field name="partner_id" />
                <field name="product_id" />
                <field name="name" />
                <field name="product_uom" />
                <field name="product_uom_qty" string="Qté commandée" />
                <field name="price_unit" />
                <field name="taxes_id" widget="many2many_tags" />
                <field name="currency_id" invisible="1" />
                <field name="price_subtotal" widget="monetary" />
                <field name="date_planned" />
            </tree>
        </field>
    </record>

    <!-- Vue Kanban -->
    <record id="sh_rfq_order_line_kanban_view_inherit" model="ir.ui.view">
        <field name="name">Kanban Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <kanban default_group_by="partner_id">
                <field name="product_id" />
                <field name="product_uom_qty" string="Qté" />
                <field name="order_id" string="Commande" />
                <field name="partner_id" />
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_details">
                                <strong>Commande : <field name="order_id" /> </strong>
                                <br />
                                Fournisseur : <field name="partner_id" string="product_id :" />
                                <br />
                                Article : <field name="product_id" />
                                <br />
                                Qté : <field name="product_uom_qty" />
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Vue Recherche -->
    <record id="sh_rfq_order_line_search_view_inherit" model="ir.ui.view">
        <field name="name">Recherche Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <search string="Lignes de Demande de Prix">
                <field name="partner_id" filter_domain="['|','|',('partner_id','ilike',self),('order_id','ilike',self),('product_id','ilike',self)]" />
                <field name="order_id" string="Commande" />
                <field name="product_id" />
                <field name="date_planned" />
                <separator />

                <filter string="Date de commande" name="filter_order_date" date="date_planned" />

                <group expand="0" string="Regrouper par">
                    <filter name="group_by_partner_id" domain="[]" string="Fournisseur" context="{'group_by':'partner_id'}" />
                    <filter name="group_by_order_id" domain="[]" string="Commande" context="{'group_by':'order_id'}" />
                    <filter name="group_by_product_id" domain="[]" string="Article" context="{'group_by':'product_id'}" />
                </group>
            </search>
        </field>
    </record>

    <!-- Vue Pivot -->
    <record model="ir.ui.view" id="view_rfq_order_line_pivot">
        <field name="name">Pivot Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <pivot string="Lignes de Demande de Prix">
                <field name="order_id" type="row" />
                <field name="product_id" type="row" />
                <field name="price_subtotal" type="measure" />
            </pivot>
        </field>
    </record>

    <!-- Vue Graphique -->
    <record model="ir.ui.view" id="view_rfq_order_line_graph">
        <field name="name">Graphique Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <graph string="Lignes de Demande de Prix">
                <field name="order_id" />
                <field name="product_id" type="measure" />
            </graph>
        </field>
    </record>

    <!-- Vue Calendrier Demande de Prix -->
    <record id="view_rfq_line_calendar" model="ir.ui.view">
        <field name="name">Calendrier Lignes de Demande de Prix</field>
        <field name="model">purchase.order.line</field>
        <field name="arch" type="xml">
            <calendar string="Lignes de Demande de Prix" date_start="create_date">
                <field name="partner_id" />
                <field name="currency_id" invisible="1" />
                <field name="price_subtotal" widget="monetary" />
            </calendar>
        </field>
    </record>

    <!-- Action -->
    <record id="sh_action_rfq_order_lines" model="ir.actions.act_window">
        <field name="name">Lignes de Demande de Prix</field>
        <field name="res_model">purchase.order.line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">tree,form,kanban,pivot,graph,calendar</field>
        <field name="domain">[('state','in',('draft','sent'))]</field>
        <field name="view_id" ref="sh_rfq_order_line_tree_view_inherit" />
    </record>

    <menuitem id="sh_purchase_order_line" name="Lignes de Commande d'Achat" action="sh_action_purchase_order_lines" sequence="22" parent="purchase.menu_procurement_management" />

    <menuitem id="sh_rfq_order_line" name="Lignes de Demande de Prix" action="sh_action_rfq_order_lines" sequence="23" parent="purchase.menu_procurement_management" />
</odoo>

<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Lignes de Facture -->
    <!-- Vues Formulaire -->
    <record id="sh_customer_invoice_line_form_view_inherit" model="ir.ui.view">
        <field name="name">Formulaire Ligne de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <form create="false" edit="false">
                <sheet>
                    <group>
                        <group>
                            <field name="move_id" string="Facture" />
                            <field name="product_id" />
                            <field name="account_id" string="Compte" />
                            <field name="tax_ids" widget="many2many_tags" />
                            <field name="currency_id" invisible="1" />
                            <field name="price_subtotal" widget="monetary" />
                            <field name="company_id" invisible="1" />
                        </group>
                        <group>
                            <field name="partner_id" />
                            <field name="name" />
                            <field name="price_unit" />
                            <field name="quantity" />
                            <field name="inv_type" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Vue Liste -->
    <record id="sh_customer_invoice_line_tree_view_inherit" model="ir.ui.view">
        <field name="name">Liste Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <tree create="false" edit="false">
                <field name="move_id" string="Facture" />
                <field name="product_id" />
                <field name="partner_id" />
                <field name="name" />
                <field name="account_id" />
                <field name="price_unit" />
                <field name="quantity" />
                <field name="company_id" invisible="1" />
                <field name="currency_id" invisible="1" />
                <field name="price_subtotal" widget="monetary" />
            </tree>
        </field>
    </record>

    <!-- Vue Recherche -->
    <record id="sh_customer_invoice_line_search_view_inherit" model="ir.ui.view">
        <field name="name">Recherche Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <search string="Rechercher Lignes de Facture">
                <filter name="draft" string="Brouillon" domain="[('parent_state','=','draft')]" />
                <filter name="posted" string="Validée" domain="[('parent_state','=','posted')]" />
                <filter name="not_paid" string="Non payée" domain="[('move_id.payment_state', '=', 'not_paid')]" />
                <filter name="in_payment" string="En paiement" domain="[('move_id.payment_state', '=', 'in_payment')]" />
                <filter name="paid" string="Payée" domain="[('move_id.payment_state', '=','paid')]" />
                <field name="partner_id" filter_domain="['|','|',('partner_id','ilike',self),('partner_id','ilike',self),('product_id','ilike',self)]" />
                <field name="product_id" />
                <field name="move_id" string="Facture" />
                <group expand="0" string="Regrouper par">
                    <filter name="group_by_invoice_partner_id" domain="[]" string="Partenaire" context="{'group_by':'partner_id'}" />
                    <filter name="group_by_invoice_id" domain="[]" string="Facture" context="{'group_by':'move_id'}" />
                    <filter name="group_by_product_id" domain="[]" string="Article" context="{'group_by':'product_id'}" />
                </group>
            </search>
        </field>
    </record>

    <!-- Vue Kanban -->
    <record id="sh_customer_invoice_line_kanban_view_inherit" model="ir.ui.view">
        <field name="name">Kanban Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <kanban default_group_by="partner_id">
                <field name="product_id" />
                <field name="quantity" string="Qté" />
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_details">
                                <strong>Facture : <field name="move_id" /> </strong>
                                <br />
                                Article : <field name="product_id" />
                                <br />
                                Qté : <field name="quantity" />
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Vue Pivot -->
    <record model="ir.ui.view" id="view_customer_line_pivot">
        <field name="name">Pivot Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <pivot string="Lignes de Facture">
                <field name="state" type="row" />
                <field name="move_id" type="row" />
                <field name="product_id" type="row" />
                <field name="quantity" type="measure" />
            </pivot>
        </field>
    </record>

    <!-- Vue Graphique -->
    <record model="ir.ui.view" id="view_customer_line_graph">
        <field name="name">Graphique Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <graph string="Lignes de Facture">
                <field name="product_id" />
                <field name="partner_id" type="measure" />
            </graph>
        </field>
    </record>

    <!-- Vue Calendrier -->
    <record id="view_customer_line_calendar" model="ir.ui.view">
        <field name="name">Calendrier Lignes de Facture</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <calendar string="Factures" date_start="create_date">
                <field name="partner_id" />
                <field name="move_id" />
            </calendar>
        </field>
    </record>

    <record id="sh_action_customer_lines" model="ir.actions.act_window">
        <field name="name">Lignes de Facture</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">form,tree,kanban,pivot,graph,calendar</field>
        <field name="search_view_id" ref="sh_customer_invoice_line_search_view_inherit" />
        <field name="domain">[('inv_type','=','out_invoice')]</field>
        <field name="type">ir.actions.act_window</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('sh_customer_invoice_line_tree_view_inherit')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_customer_line_pivot')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('view_customer_line_graph')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('view_customer_line_calendar')})]"
        />
    </record>

    <record id="sh_action_customer_credit_lines" model="ir.actions.act_window">
        <field name="name">Lignes d'Avoir Client</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">tree,form,kanban,pivot,graph</field>
        <field name="search_view_id" ref="sh_customer_invoice_line_search_view_inherit" />
        <field name="domain">[('inv_type','=','out_refund')]</field>
        <field name="type">ir.actions.act_window</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('sh_customer_invoice_line_tree_view_inherit')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_customer_line_pivot')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('view_customer_line_graph')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('view_customer_line_calendar')})]"
        />
    </record>

    <record id="sh_action_vendor_lines" model="ir.actions.act_window">
        <field name="name">Lignes de Facture Fournisseur</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">tree,form,kanban,pivot,graph</field>
        <field name="search_view_id" ref="sh_customer_invoice_line_search_view_inherit" />
        <field name="domain">[('inv_type','=','in_invoice')]</field>
        <field name="type">ir.actions.act_window</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('sh_customer_invoice_line_tree_view_inherit')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_customer_line_pivot')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('view_customer_line_graph')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('view_customer_line_calendar')})]"
        />
    </record>

    <record id="sh_action_vendor_credit_lines" model="ir.actions.act_window">
        <field name="name">Lignes d'Avoir Fournisseur</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">tree,form,kanban,pivot</field>
        <field name="search_view_id" ref="sh_customer_invoice_line_search_view_inherit" />
        <field name="domain">[('inv_type','=','in_refund')]</field>
        <field name="type">ir.actions.act_window</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('sh_customer_invoice_line_tree_view_inherit')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_customer_line_pivot')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('view_customer_line_graph')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('view_customer_line_calendar')})]"
        />
    </record>

    <record id="sh_action_account_all_lines" model="ir.actions.act_window">
        <field name="name">Toutes les Lignes Comptables</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">tree,form,kanban,pivot</field>
        <field name="type">ir.actions.act_window</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('sh_customer_invoice_line_tree_view_inherit')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_customer_line_pivot')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('view_customer_line_graph')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('view_customer_line_calendar')})]"
        />
    </record>

    <menuitem id="sh_customer_invoice_line" name="Lignes de Facture" action="sh_action_customer_lines" parent="account.menu_finance_receivables" sequence="111" />

    <menuitem id="sh_customer_invoice_credit_line" name="Lignes d'Avoir Client" action="sh_action_customer_credit_lines" parent="account.menu_finance_receivables" sequence="112" />

    <menuitem id="sh_vendor_line" name="Lignes de Facture Fournisseur" action="sh_action_vendor_lines" parent="account.menu_finance_payables" sequence="213" />

    <menuitem id="sh_vendor_credit_line" name="Lignes d'Avoir Fournisseur" action="sh_action_vendor_credit_lines" parent="account.menu_finance_payables" sequence="214" />

    <menuitem id="sh_account_all_line" name="Toutes les Lignes" action="sh_action_account_all_lines" parent="account.menu_finance_entries" sequence="615" />
</odoo>

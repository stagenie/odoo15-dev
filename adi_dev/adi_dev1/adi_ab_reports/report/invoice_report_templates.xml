<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Template pour les factures -->
    <template id="report_invoice_document_ab" inherit_id="account.report_invoice_document">

        <!-- Enlever le titre "Facture" et garder seulement le numéro -->
        <xpath expr="//h2[@class='mt-4']" position="replace">
            <h2 class="mt-4">
                <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">
                    <span t-field="o.name"/>
                </span>
                <span t-elif="o.move_type == 'out_invoice' and o.state == 'draft'">
                    Brouillon de facture
                </span>
                <span t-elif="o.move_type == 'out_refund'">
                    Avoir <span t-field="o.name"/>
                </span>
                <span t-elif="o.move_type == 'in_refund'">
                    Avoir fournisseur
                </span>
                <span t-elif="o.move_type == 'in_invoice'">
                    Facture fournisseur
                </span>
            </h2>
        </xpath>

        <!-- Enlever la Date d'échéance et l'Origine -->
        <xpath expr="//p[@class='m-0']//strong[text()='Date d\'échéance:']/.." position="replace">
            <!-- Supprimé -->
        </xpath>

        <xpath expr="//p[@class='m-0']//strong[contains(text(), 'Origine')]/.." position="replace">
            <!-- Supprimé -->
        </xpath>

        <!-- Enlever la date d'échéance si elle est dans un autre emplacement -->
        <xpath expr="//p[@name='invoice_date_due']" position="replace">
            <!-- Supprimé -->
        </xpath>

        <!-- Ajouter le mode de règlement en bas de la facture -->
        <xpath expr="//div[@id='total']" position="after">
            <div class="row mt-4" t-if="o.payment_method_display">
                <div class="col-12">
                    <table class="table table-sm table-borderless">
                        <tr>
                            <td><strong>Mode de règlement:</strong></td>
                            <td class="text-end">
                                <span t-field="o.payment_method_display"/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </xpath>

        <!-- Corriger l'affichage de la remise (formatage avec décimales) -->
        <xpath expr="//td[@name='td_discount']//span" position="attributes">
            <attribute name="t-options">{"widget": "float", "precision": 2}</attribute>
        </xpath>
    </template>

    <!-- Désactiver le rapport "Journal des ventes" si nécessaire -->
    <!-- Note: Pour enlever complètement l'impression, il faut désactiver le rapport -->
    <record id="account.account_invoices" model="ir.actions.report">
        <field name="active" eval="False"/>
    </record>
</odoo>

<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Héritage du template adi_team_header pour corriger l'IndexError -->
    <template id="external_layout_custom_header_fix" inherit_id="adi_team_header.external_layout_custom_header">

        <!-- Corriger la vérification pour les devis/commandes clients -->
        <xpath expr="//t[@t-if=&quot;docs and docs[0]._name == 'sale.order'&quot;]" position="attributes">
            <attribute name="t-if">docs and len(docs) > 0 and docs[0]._name == 'sale.order'</attribute>
        </xpath>

        <!-- Corriger la vérification pour les bons de livraison -->
        <xpath expr="//t[@t-if=&quot;docs and docs[0]._name == 'stock.picking'&quot;]" position="attributes">
            <attribute name="t-if">docs and len(docs) > 0 and docs[0]._name == 'stock.picking'</attribute>
        </xpath>

        <!-- Corriger la vérification pour les factures -->
        <xpath expr="//t[@t-if=&quot;docs and docs[0]._name == 'account.move'&quot;]" position="attributes">
            <attribute name="t-if">docs and len(docs) > 0 and docs[0]._name == 'account.move'</attribute>
        </xpath>

        <!-- Corriger le cas par défaut -->
        <xpath expr="//t[@t-if=&quot;docs and docs[0]._name not in ['sale.order', 'stock.picking', 'account.move']&quot;]" position="attributes">
            <attribute name="t-if">docs and len(docs) > 0 and docs[0]._name not in ['sale.order', 'stock.picking', 'account.move']</attribute>
        </xpath>

    </template>
</odoo>
